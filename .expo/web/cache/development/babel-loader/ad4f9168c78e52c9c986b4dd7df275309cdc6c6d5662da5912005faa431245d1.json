{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport app from \"./firebase\";\nvar auth = getAuth(app);\nexport var handleLogin = function () {\n  var _ref = _asyncToGenerator(function* (email, password) {\n    try {\n      yield signInWithEmailAndPassword(auth, email, password);\n      var user = auth.currentUser;\n      console.log(\"Logged in with\", user.email);\n      return {\n        success: true,\n        user: user\n      };\n    } catch (error) {\n      console.error(\"Login failed: \", error.message);\n      return {\n        success: false,\n        error: error.message\n      };\n    }\n  });\n  return function handleLogin(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var getUserType = function () {\n  var _ref2 = _asyncToGenerator(function* (userId) {\n    try {\n      var colUser = collection(getFirestore(app), \"signUp\");\n      var userQuery = query(colUser, where(\"userId\", \"==\", userId));\n      var snapshot = yield getDocs(userQuery);\n      for (var doc of snapshot.docs) {\n        var userType = doc.data().userType;\n        console.log(\"UserType:\", userType);\n        return userType;\n      }\n    } catch (error) {\n      console.error(\"Error getting user type: \", error);\n      return null;\n    }\n  });\n  return function getUserType(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var subscribeToAuthChanges = function subscribeToAuthChanges(callback) {\n  return onAuthStateChanged(auth, callback);\n};","map":{"version":3,"names":["getAuth","signInWithEmailAndPassword","onAuthStateChanged","getFirestore","collection","query","where","getDocs","app","auth","handleLogin","_ref","_asyncToGenerator","email","password","user","currentUser","console","log","success","error","message","_x","_x2","apply","arguments","getUserType","_ref2","userId","colUser","userQuery","snapshot","doc","docs","userType","data","_x3","subscribeToAuthChanges","callback"],"sources":["/Users/ipekkaya/Documents/Github/nativeOTapp/components/screens/AuthHandler.js"],"sourcesContent":["// AuthHandler.js\n\nimport { getAuth, signInWithEmailAndPassword, onAuthStateChanged } from \"firebase/auth\";\nimport { getFirestore, collection, query, where, getDocs } from \"firebase/firestore\";\nimport app from \"./firebase\";\n\n\n\nconst auth = getAuth(app);\n\nexport const handleLogin = async (email, password) => {\n  try {\n    await signInWithEmailAndPassword(auth, email, password);\n    const user = auth.currentUser;\n    console.log(\"Logged in with\", user.email);\n    return { success: true, user: user };\n  } catch (error) {\n    console.error(\"Login failed: \", error.message);\n    return { success: false, error: error.message };\n  }\n};\n\nexport const getUserType = async (userId) => {\n  try {\n    const colUser = collection(getFirestore(app), \"signUp\");\n    const userQuery = query(colUser, where(\"userId\", \"==\", userId));\n    const snapshot = await getDocs(userQuery);\n\n    for (const doc of snapshot.docs) {\n      const userType = doc.data().userType;\n      console.log(\"UserType:\", userType);\n      return userType;\n    }\n  } catch (error) {\n    console.error(\"Error getting user type: \", error);\n    return null;\n  }\n};\n\nexport const subscribeToAuthChanges = (callback) => {\n  return onAuthStateChanged(auth, callback);\n};\n"],"mappings":";AAEA,SAASA,OAAO,EAAEC,0BAA0B,EAAEC,kBAAkB,QAAQ,eAAe;AACvF,SAASC,YAAY,EAAEC,UAAU,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,QAAQ,oBAAoB;AACpF,OAAOC,GAAG;AAIV,IAAMC,IAAI,GAAGT,OAAO,CAACQ,GAAG,CAAC;AAEzB,OAAO,IAAME,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,WAAOC,KAAK,EAAEC,QAAQ,EAAK;IACpD,IAAI;MACF,MAAMb,0BAA0B,CAACQ,IAAI,EAAEI,KAAK,EAAEC,QAAQ,CAAC;MACvD,IAAMC,IAAI,GAAGN,IAAI,CAACO,WAAW;MAC7BC,OAAO,CAACC,GAAG,CAAC,gBAAgB,EAAEH,IAAI,CAACF,KAAK,CAAC;MACzC,OAAO;QAAEM,OAAO,EAAE,IAAI;QAAEJ,IAAI,EAAEA;MAAK,CAAC;IACtC,CAAC,CAAC,OAAOK,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAACC,OAAO,CAAC;MAC9C,OAAO;QAAEF,OAAO,EAAE,KAAK;QAAEC,KAAK,EAAEA,KAAK,CAACC;MAAQ,CAAC;IACjD;EACF,CAAC;EAAA,gBAVYX,WAAWA,CAAAY,EAAA,EAAAC,GAAA;IAAA,OAAAZ,IAAA,CAAAa,KAAA,OAAAC,SAAA;EAAA;AAAA,GAUvB;AAED,OAAO,IAAMC,WAAW;EAAA,IAAAC,KAAA,GAAAf,iBAAA,CAAG,WAAOgB,MAAM,EAAK;IAC3C,IAAI;MACF,IAAMC,OAAO,GAAGzB,UAAU,CAACD,YAAY,CAACK,GAAG,CAAC,EAAE,QAAQ,CAAC;MACvD,IAAMsB,SAAS,GAAGzB,KAAK,CAACwB,OAAO,EAAEvB,KAAK,CAAC,QAAQ,EAAE,IAAI,EAAEsB,MAAM,CAAC,CAAC;MAC/D,IAAMG,QAAQ,SAASxB,OAAO,CAACuB,SAAS,CAAC;MAEzC,KAAK,IAAME,GAAG,IAAID,QAAQ,CAACE,IAAI,EAAE;QAC/B,IAAMC,QAAQ,GAAGF,GAAG,CAACG,IAAI,CAAC,CAAC,CAACD,QAAQ;QACpCjB,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEgB,QAAQ,CAAC;QAClC,OAAOA,QAAQ;MACjB;IACF,CAAC,CAAC,OAAOd,KAAK,EAAE;MACdH,OAAO,CAACG,KAAK,CAAC,2BAA2B,EAAEA,KAAK,CAAC;MACjD,OAAO,IAAI;IACb;EACF,CAAC;EAAA,gBAfYM,WAAWA,CAAAU,GAAA;IAAA,OAAAT,KAAA,CAAAH,KAAA,OAAAC,SAAA;EAAA;AAAA,GAevB;AAED,OAAO,IAAMY,sBAAsB,GAAG,SAAzBA,sBAAsBA,CAAIC,QAAQ,EAAK;EAClD,OAAOpC,kBAAkB,CAACO,IAAI,EAAE6B,QAAQ,CAAC;AAC3C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}